(this["webpackJsonpbus-display"]=this["webpackJsonpbus-display"]||[]).push([[0],{31:function(e,t,n){},32:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var i,c,a,s,r=n(0),o=n.n(r),l=n(22),u=n.n(l),d=(n(31),n(2)),b=n(12),p=n(4),f=n(3),j=(n(32),n(8)),h=n.n(j),v=n(23),O=n(1);h.a.workerClass=v.a,h.a.accessToken="pk.eyJ1IjoidG9tZWxsaW90dG56IiwiYSI6ImNrbmswb2hteDA1amwyb3A5YzlxZmZtMWoifQ.z4AcPvAC_QamiORckX-CTQ";var m,x=function(e){e.vehicles;var t=Object(r.useRef)(),n=Object(r.useState)(174.860478),i=Object(p.a)(n,2),c=i[0],a=(i[1],Object(r.useState)(-36.845794)),s=Object(p.a)(a,2),o=s[0],l=(s[1],Object(r.useState)(10)),u=Object(p.a)(l,2),d=u[0];return u[1],Object(r.useEffect)((function(){new h.a.Map({container:t.current,style:{version:8,sources:{"raster-tiles":{type:"raster",tiles:["https://abcd.basemaps.cartocdn.com/rastertiles/dark_nolabels/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"simple-tiles",type:"raster",source:"raster-tiles",minzoom:0,maxzoom:22}]},center:[c,o],zoom:d}).scrollZoom.disable()}),[]),Object(O.jsx)(g,{children:Object(O.jsx)(y,{ref:t})})},g=f.a.div(i||(i=Object(d.a)([""]))),y=f.a.div(c||(c=Object(d.a)(["\n    position: fixed;\n    top: 0;\n    left: 0;\n    height: 100vh;\n    width: 100vw;\n    background: #262626;\n"])));f.a.div(a||(a=Object(d.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n"]))),f.a.div(s||(s=Object(d.a)(["\n  display: inline-block;\n  height: 20px;\n  width: 50px;\n  font-size: 10px;\n  background: pink;\n  margin: 1em;\n  text-align: center;\n  line-height: 20px;\n"])));var k=function(){var e=Object(r.useState)([]),t=Object(p.a)(e,2),n=t[0],i=t[1],c=Object(r.useState)([]),a=Object(p.a)(c,2),s=a[0],o=a[1];return Object(r.useEffect)((function(){fetch("https://api.at.govt.nz/v2/public/realtime/",{headers:{"Ocp-Apim-Subscription-Key":"921fa76f32d94d9d9d645f4db9f0f498"}}).then((function(e){if(e.ok)return e.json();console.log(e)})).then((function(e){return i(e.response.entity)}))}),[]),Object(r.useEffect)((function(){o(n.filter((function(e){return e.vehicle&&!e.is_deleted&&e.vehicle.position})).map((function(e){var t,i=n.filter((function(t){var n;return t.trip_update&&(null===(n=t.trip_update.vehicle)||void 0===n?void 0:n.id)===e.vehicle.vehicle.id}));return Object(b.a)(Object(b.a)({},e.vehicle),{},{key:e.vehicle.vehicle.id,trip_update:null===(t=i[0])||void 0===t?void 0:t.trip_update})})))}),[n]),Object(r.useEffect)((function(){console.log(s)}),[s]),Object(O.jsx)(w,{children:Object(O.jsx)(x,{vehicles:s})})},w=f.a.div(m||(m=Object(d.a)([""]))),S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,54)).then((function(t){var n=t.getCLS,i=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),i(e),c(e),a(e),s(e)}))};u.a.render(Object(O.jsx)(o.a.StrictMode,{children:Object(O.jsx)(k,{})}),document.getElementById("root")),S()}},[[53,1,2]]]);
//# sourceMappingURL=main.9c90322c.chunk.js.map